{#
 * This file is part of the project tutteli/purchase published under the Apache License 2.0
 * For the full copyright and license information, please have a look at LICENSE in the
 * root folder or visit https://github.com/robstoll/purchase
 #}
 {% extends notXhr ? 'TutteliAppBundle::layout.html.twig' : 'xhr.twig' %}

{% block title %} Edit Category | {{ parent() }}{% endblock %}


{% block content %}
    {% if notXhr %}
    <div ui-view></div>
    	<div pre-work="categories/edit.tpl">
    {%  endif %}
    	
    	{%  set btnText = 'categories.update'|trans %}
    	{%  set formAction = notXhr ? path('put_category', {'categoryId': category.id}) : '' %}
        {%  set formSubmit = 'categoryCtrl.updateCategory($event)' %}
    	{%  include 'TutteliAppBundle:Category:form.incl.twig' %}
    	
    {% if notXhr %}
    	</div>
    	
        <script type="text/javascript">
        	document.getElementById('category_id').value = '{{ category.id }}';
        	document.getElementById('category_name').value = '{{ category.name }}';
        </script>
        {%  include 'TutteliAppBundle:tpl:updateBlock.js.twig' 
            with {
            	'controllerName': 'categoryCtrl',
                'updatedAt': category.updatedAt|date('general.dateTimeFormat.php'|trans), 
                'updatedBy': category.updatedBy.username
            } only %}        
    {%  endif %}
{% endblock %}